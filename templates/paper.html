{% extends "base.html" %}
{% block title %}{{ paper.title_zh or paper.title }} — {{ site_title }}{% endblock %}
{% block content %}

<div class="paper-page-header">
  <a href="{{ base_path }}{{ date }}/index.html" style="font-size:0.85rem;color:var(--text-muted);">
    ← {{ date }} 論文列表
  </a>
  <h1 style="margin-top:0.75rem;">{{ paper.title_zh or paper.title }}</h1>
  {% if paper.title_zh %}
  <div class="en-title">{{ paper.title }}</div>
  {% endif %}

  <div class="paper-meta">
    {% if paper.authors %}
    <span>{{ paper.authors | join(", ") }}</span>
    {% endif %}
    <span>arXiv: <a href="https://arxiv.org/abs/{{ paper.arxiv_id }}" target="_blank">{{ paper.arxiv_id }}</a></span>
    {% if paper.parse_source %}
    <span style="color:var(--text-muted);font-size:0.8rem;">
      來源：{{ "arxiv HTML" if paper.parse_source == "html" else "PDF + DotsOCR" }}
    </span>
    {% endif %}
  </div>

  <div class="paper-links">
    <a href="https://arxiv.org/pdf/{{ paper.arxiv_id }}" target="_blank" rel="noopener" class="btn btn-primary">PDF 原文</a>
    <a href="https://arxiv.org/abs/{{ paper.arxiv_id }}" target="_blank" rel="noopener" class="btn btn-outline">arXiv</a>
    <a href="https://huggingface.co/papers/{{ paper.arxiv_id }}" target="_blank" rel="noopener" class="btn btn-outline">HF 頁面</a>
  </div>

  <div class="tags">
    {% for d in paper.tags.domain %}<span class="tag domain">{{ d }}</span>{% endfor %}
    {% for m in paper.tags.method %}<span class="tag method">{{ m }}</span>{% endfor %}
    {% for t in paper.tags.task %}<span class="tag task">{{ t }}</span>{% endfor %}
    {% if paper.tags.open_source %}<span class="tag open">Open Source</span>{% endif %}
  </div>
</div>

<!-- Abstract -->
<div class="abstract-box">
  <h2>摘要</h2>
  <p>{{ paper.abstract_zh or paper.abstract }}</p>
  {% if paper.abstract_zh %}
  <div class="abstract-en">{{ paper.abstract }}</div>
  {% endif %}
</div>

<!-- Full translated content -->
<div class="paper-body">
  {% if content_html %}
    {{ content_html | safe }}
  {% else %}
    <p style="color:var(--text-muted);font-style:italic;">全文翻譯尚未生成。</p>
  {% endif %}
</div>

{% endblock %}
